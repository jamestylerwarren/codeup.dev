<!DOCTYPE html>
<html>
	<head>
		<title>Google Maps</title>
		<style>	
			#map {
				height: 750px;
			}
		</style>
	</head>
	<body>
		<div id="map"></div>

		<!-- Load the Google Maps API [DON'T FORGET TO USE A KEY] -->
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAHITQ3RChA0cE-XG9-ujWjQH_6aTjnbag"></script>

			<!-- Script to show address on map -->
		<script type="text/javascript">
			(function() {
				"use strict";

				// Set our map options
				var mapOptions = {
					// Set the zoom level
					zoom: 12,

					// This sets the center of the map at our location
					center: {
						lat:  29.4437787,
						lng: -98.4794078
					},

				};

				// Render the map
				var map = new google.maps.Map(document.getElementById("map"), mapOptions);

				var geocoder = new google.maps.Geocoder();

				// Include code from previous example

				// Set our address to geocode
				var address = "200 E Grayson St, San Antonio, TX 78215";

				// Init geocoder object
				var geocoder = new google.maps.Geocoder();
				// var address = "400 east huisache san antonio tx 78212";

				// Geocode our address
				geocoder.geocode({ "address": address }, function(results, status) {

				   // Check for a successful result
				   if (status == google.maps.GeocoderStatus.OK) {

					   // Recenter the map over the address
					   map.setCenter(results[0].geometry.location);
				   } else {

					   // Show an error message with the status if our request fails
					   alert("Geocoding was not successful - STATUS: " + status);
				   }
				});

				// Array for all marker locations
				var markers = [
					{	//Il Sogno
						"position": {lat: 29.4437787, lng: -98.4794078}, 
						"icon": "/img/ItalyFlag.png",
						"content": "<h1>Osteria Il Sogno</h1>200 E Grayson St<br>San Antonio, TX 78215<br><img src='/img/il-sogno.jpg' alt='Osteria Il Sogno'>"
					},
					
					{	//Thai House
						"position": {lat: 29.4842991, lng: -98.413348}, 
						"icon": "/img/ThaiFlag.png",
						"content": "<h1>Thai House</h1>4114 Rittiman Rd<br>San Antonio, TX 78218<br><img src='/img/ThaiHouse.jpg' alt='Thai House'>"
						
					},
					{	//Bliss
						"position": {lat: 29.4112468, lng: -98.4869666}, 
						"icon": "/img/AmericaFlag.png",
						"content": "<h1>Bliss</h1>926 S Presa St<br>San Antonio, TX 78210<br><img src='/img/Bliss.jpg' alt='Bliss'>"
						
					},
					{	//Siete Mares
						"position": {lat: 29.429678, lng: -98.54095}, 
						"icon": "/img/MexicoFlag.png",
						"content": "<h1>Siete Mares</h1>3831 W Commerce St<br>San Antonio, TX 78207<br><img src='/img/SieteMares.jpg' alt='Siete Mares'>"
						
					},
					{	//Chris Madrid's
						"position": {lat: 29.464171, lng: -98.5076248}, 
						"icon": "/img/AmericaFlag.png",
						"content": "<h1>Chris Madrid's</h1>1900 Blanco Rd<br>San Antonio, TX 78201<br><img src='/img/chrismadrids.jpg' alt='Chirs Madrid's>"
						
					},
					{	//Filling Station
						"position": {lat: 29.4174861, lng: -98.4903767}, 
						"icon": "/img/AmericaFlag.png",
						"content": "<h1>Filling Station Tap Room</h1>701 S Saint Marys St<br>San Antonio, TX 78204<br><img src='/img/FillingStation.jpg' alt='Filling Station'>"
						
					},
					{	//Thousand Oaks Cafe
						"position": {lat: 29.4900531, lng: -98.4445841}, 
						"icon": "/img/MexicoFlag.png",
						"content": "<h1>Thousand Oaks Cafe</h1>1271 Austin Hwy<br>San Antonio, TX 78209<br><img src='/img/thousandoaks.jpg' alt='Thousand Oaks Cafe'>"
						
					},
					{	//Stella
						"position": {lat: 29.4099321, lng: -98.4955185}, 
						"icon": "/img/ItalyFlag.png",
						"content": "<h1>Stella Public House</h1>1414 S Alamo St<br>San Antonio, TX 78210<br><img src='/img/stella.jpg' alt='Stella Public House'>"
						
					},
				];
				var prev_infowindow = false;
				function setMarker(){
					markers.forEach(function(markerInfo) {
						var marker = new google.maps.Marker({
							 position: markerInfo.position,
							 map: map,
							 icon: markerInfo.icon
						});

						var infoWindow = new google.maps.InfoWindow({
							 content: markerInfo.content
						});
						
						google.maps.event.addListener (marker, 'click', function() {
							if (prev_infowindow) {
					           prev_infowindow.close();
					        }

					        prev_infowindow = infoWindow;
							infoWindow.open(map, this);
						})
					})
				}; 
				setMarker();


			})();
		</script>
	</body>
</html>


